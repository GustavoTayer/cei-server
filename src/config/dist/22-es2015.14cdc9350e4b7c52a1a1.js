(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"3ZFV":function(t,e,n){"use strict";n.r(e),n.d(e,"ListaSolicitacaoModule",(function(){return dt}));var a=n("ofXK"),c=n("lJxs"),i=n("UXun"),o=n("fXoL"),r=n("nLfN"),b=n("XNiG"),s=n("itXk"),l=n("GyhO"),u=n("HDdC"),d=n("IzEk"),f=n("zP0r"),g=n("Kj3r"),m=n("JX91"),p=n("1G5W"),h=n("8LU1");const X=new Set;let Y,k=(()=>{class t{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):v}matchMedia(t){return this._platform.WEBKIT&&function(t){if(!X.has(t))try{Y||(Y=document.createElement("style"),Y.setAttribute("type","text/css"),document.head.appendChild(Y)),Y.sheet&&(Y.sheet.insertRule(`@media ${t} {.fx-query-test{ }}`,0),X.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return t.\u0275fac=function(e){return new(e||t)(o.cc(r.a))},t.\u0275prov=Object(o.Ob)({factory:function(){return new t(Object(o.cc)(r.a))},token:t,providedIn:"root"}),t})();function v(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let F=(()=>{class t{constructor(t,e){this._mediaMatcher=t,this._zone=e,this._queries=new Map,this._destroySubject=new b.a}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return P(Object(h.a)(t)).some(t=>this._registerQuery(t).mql.matches)}observe(t){const e=P(Object(h.a)(t)).map(t=>this._registerQuery(t).observable);let n=Object(s.a)(e);return n=Object(l.a)(n.pipe(Object(d.a)(1)),n.pipe(Object(f.a)(1),Object(g.a)(0))),n.pipe(Object(c.a)(t=>{const e={matches:!1,breakpoints:{}};return t.forEach(t=>{e.matches=e.matches||t.matches,e.breakpoints[t.query]=t.matches}),e}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const e=this._mediaMatcher.matchMedia(t),n={observable:new u.a(t=>{const n=e=>this._zone.run(()=>t.next(e));return e.addListener(n),()=>{e.removeListener(n)}}).pipe(Object(m.a)(e),Object(c.a)(e=>({query:t,matches:e.matches})),Object(p.a)(this._destroySubject)),mql:e};return this._queries.set(t,n),n}}return t.\u0275fac=function(e){return new(e||t)(o.cc(k),o.cc(o.A))},t.\u0275prov=Object(o.Ob)({factory:function(){return new t(Object(o.cc)(k),Object(o.cc)(o.A))},token:t,providedIn:"root"}),t})();function P(t){return t.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var S=n("mrSG"),O=n("aceb"),y=n("8/IB"),w=n("vI6V"),D=n("wHSu");let T=(()=>{class t{constructor(t){this.ref=t}ngOnInit(){}cancel(){this.ref.close(!1)}submit(){this.ref.close(!0)}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(O.M))},t.\u0275cmp=o.Mb({type:t,selectors:[["ngx-dialog-show-component"]],decls:10,vars:0,consts:[["nbButton","","status","danger",1,"cancel",3,"click"],["nbButton","","status","success",3,"click"]],template:function(t,e){1&t&&(o.Yb(0,"nb-card"),o.Yb(1,"nb-card-header"),o.Jc(2,"Confirme a altera\xe7\xe3o de status"),o.Xb(),o.Yb(3,"nb-card-body"),o.Jc(4," Voc\xea tem certeza que deseja solicitar o cancelamento? "),o.Xb(),o.Yb(5,"nb-card-footer"),o.Yb(6,"button",0),o.gc("click",(function(){return e.cancel()})),o.Jc(7,"Cancelar"),o.Xb(),o.Yb(8,"button",1),o.gc("click",(function(){return e.submit()})),o.Jc(9,"Solicitar"),o.Xb(),o.Xb(),o.Xb())},directives:[O.x,O.A,O.w,O.y,O.t],styles:["input[_ngcontent-%COMP%]{width:100%}.cancel[_ngcontent-%COMP%]{margin-right:2rem}"]}),t})();var C=n("9ig3"),j=n("jKzE"),J=n("sWYD"),x=n("3Pt+"),N=n("6NWb"),M=n("tyNb");function _(t,e){if(1&t&&(o.Yb(0,"nb-option",33),o.Jc(1),o.Xb()),2&t){const t=e.$implicit;o.rc("value",t.k),o.Fb(1),o.Kc(t.v)}}function H(t,e){1&t&&o.Tb(0,"tr",34)}function L(t,e){1&t&&o.Tb(0,"tr",35),2&t&&o.rc("clickToToggle",!1)}function B(t,e){if(1&t&&(o.Yb(0,"th",36),o.Jc(1," Status/Produto "),o.Xb()),2&t){const t=o.kc();o.rc("nbSortHeader",t.getSortDirection("nome"))}}function G(t,e){if(1&t&&o.Tb(0,"nb-tree-grid-row-toggle",39),2&t){const t=o.kc().$implicit;o.rc("expanded",t.expanded)}}function A(t,e){if(1&t&&(o.Yb(0,"td",37),o.Hc(1,G,1,1,"nb-tree-grid-row-toggle",38),o.Jc(2),o.Xb()),2&t){const t=e.$implicit;o.Fb(1),o.rc("ngIf",t.children),o.Fb(1),o.Lc(" ",t.data.nome," ")}}function R(t,e){if(1&t&&(o.Yb(0,"th",36),o.Jc(1," Dt. Desejada/Qtd. Solicitada "),o.Xb()),2&t){const t=o.kc();o.rc("nbSortHeader",t.getSortDirection("uq"))}}function I(t,e){if(1&t&&(o.Yb(0,"td",37),o.Jc(1),o.Xb()),2&t){const t=e.$implicit;o.Fb(1),o.Lc(" ",t.data.uq," ")}}function z(t,e){if(1&t&&(o.Yb(0,"th",36),o.Jc(1," Valor "),o.Xb()),2&t){const t=o.kc();o.rc("nbSortHeader",t.getSortDirection("valor"))}}function $(t,e){if(1&t&&(o.Yb(0,"td",37),o.Jc(1),o.Xb()),2&t){const t=e.$implicit;o.Fb(1),o.Lc(" ",t.data.valor," ")}}function q(t,e){if(1&t&&(o.Yb(0,"th",36),o.Jc(1," Criado em "),o.Xb()),2&t){const t=o.kc();o.rc("nbSortHeader",t.getSortDirection("dataDesejada"))}}function E(t,e){if(1&t&&(o.Yb(0,"td",37),o.Jc(1),o.Xb()),2&t){const t=e.$implicit;o.Fb(1),o.Lc(" ",t.data.criadoEm," ")}}function V(t,e){1&t&&(o.Yb(0,"th",40),o.Jc(1," Cancelar "),o.Xb())}function K(t,e){if(1&t){const t=o.Zb();o.Yb(0,"td",37),o.Yb(1,"button",41),o.gc("click",(function(){o.Bc(t);const n=e.$implicit;return o.kc().alterarStatus(n.data._id)})),o.Tb(2,"fa-icon",30),o.Xb(),o.Xb()}if(2&t){const t=e.$implicit,n=o.kc();o.Fb(1),o.rc("disabled","Aberto"!==t.data.nome),o.Fb(1),o.rc("icon",n.faTrash)}}function W(t,e){if(1&t){const t=o.Zb();o.Yb(0,"button",42),o.gc("click",(function(){o.Bc(t);const e=o.kc();return e.mudarPagina(e.pageNumber-1)})),o.Jc(1),o.Xb()}if(2&t){const t=o.kc();o.Fb(1),o.Lc(" ",t.pageNumber-1," ")}}function Q(t,e){if(1&t){const t=o.Zb();o.Yb(0,"button",42),o.gc("click",(function(){o.Bc(t);const e=o.kc();return e.mudarPagina(e.pageNumber+1)})),o.Jc(1),o.Xb()}if(2&t){const t=o.kc();o.Fb(1),o.Lc(" ",t.pageNumber+1," ")}}let Z=(()=>{class t{constructor(t,e,n,a,c){this.dataSourceBuilder=t,this.solicitacaoProdutoService=e,this.fb=n,this.toastrService=a,this.dialogService=c,this.customColumn="nome",this.defaultColumns=[],this.allColumns=["nome","uq","valor","dataDesejada","cancelar"],this.status=Object.keys(w.d).map(t=>({k:t,v:w.d[t]})),this.sortDirection=O.rb.NONE,this.filtro=this.fb.group({dataCriacao:null,dataDesejada:null,status:null}),this.faSearch=D.h,this.faPlus=D.g,this.faTrash=D.i,this.faAngleRight=D.d,this.faAngleLeft=D.c,this.faAngleDoubleLeft=D.a,this.faAngleDoubleRight=D.b,this.nPerPage=10,this.pageNumber=1}ngOnInit(){return Object(S.a)(this,void 0,void 0,(function*(){const t=Object(C.a)(new Date),e=Object(j.a)(new Date);this.filtro.patchValue({status:"ABERTO",dataCriacao:{start:t,end:e},dataDesejada:{start:t,end:e}}),this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe(t=>{this.setData(t.solicitacoes),this.setLastPageAndCount(t.count)})}))}setLastPageAndCount(t){this.countSolicitacoes=t,this.nOfPages=Math.ceil(t/this.nPerPage)}setData(t){this.data=t.map(t=>{const e=t.produtos;delete t.produtos;const n=e.map(t=>({data:{uq:t.quantidade,nome:t.produto.nome,valor:`R$ ${t.valor.toFixed(2)}`}})),a=Object(J.a)(new Date(t.dataDesejada),"dd/MM/yyyy"),c=Object(J.a)(new Date(t.criadoEm),"dd/MM/yyyy");return{data:{_id:t._id,nome:w.d[t.status],uq:a,valor:`R$ ${t.valorTotal.toFixed(2)}`,criadoEm:c},children:n}}),this.dataSource=this.dataSourceBuilder.create(this.data)}buscar(){this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe(t=>{this.setData(t.solicitacoes),this.setLastPageAndCount(t.count),this.pageNumber=1})}cancelar(t){this.solicitacaoProdutoService.cancelar(t).subscribe(t=>{this.toastrService.info("Favor, aguarde aprova\xe7\xe3o do respons\xe1vel","Solicita\xe7\xe3o de cancelamento enviada",{duration:6e3}),this.buscar()})}mudarPagina(t){this.pageNumber=t,this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,this.pageNumber,this.nPerPage).subscribe(t=>{this.setData(t.solicitacoes),this.setLastPageAndCount(t.count)})}updateSort(t){this.sortColumn=t.column,this.sortDirection=t.direction}getSortDirection(t){return this.sortColumn===t?this.sortDirection:O.rb.NONE}getShowOn(t){return 400+100*t}alterarStatus(t){this.dialogService.open(T).onClose.subscribe(e=>{e&&this.cancelar(t)})}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(O.Hb),o.Sb(y.a),o.Sb(x.c),o.Sb(O.yb),o.Sb(O.N))},t.\u0275cmp=o.Mb({type:t,selectors:[["ngx-lista-solicitacao-desktop"]],decls:65,vars:22,consts:[[3,"formGroup"],[1,"row","form-group"],[1,"form-group","col-md-4"],["for","Nome","required","",1,"label"],["placeholder","Status","formControlName","status","fullWidth",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","form-group"],[1,"label"],["nbInput","","formControlName","dataCriacao",3,"nbDatepicker"],["rangepicker",""],["nbInput","","formControlName","dataDesejada",3,"nbDatepicker"],["dataDesejada",""],["nbButton","","status","basic",2,"padding","6px","margin-right","8px",3,"click"],[2,"margin-right","5px",3,"icon"],["nbButton","","status","primary","routerLink","/pages/solicitacao-produto/solicitar",2,"padding","6px"],[3,"nbTreeGrid","nbSort","sort"],["nbTreeGridHeaderRow","",4,"nbTreeGridHeaderRowDef"],["nbTreeGridRow","",3,"clickToToggle",4,"nbTreeGridRowDef","nbTreeGridRowDefColumns"],[3,"nbTreeGridColumnDef"],["nbTreeGridHeaderCell","",3,"nbSortHeader",4,"nbTreeGridHeaderCellDef"],["nbTreeGridCell","",4,"nbTreeGridCellDef"],["nbTreeGridColumnDef","uq"],["nbTreeGridColumnDef","valor"],["nbTreeGridColumnDef","dataDesejada"],["nbTreeGridColumnDef","cancelar"],["nbTreeGridHeaderCell","",4,"nbTreeGridHeaderCellDef"],["nbButton","","ghost","",3,"disabled"],[3,"icon","click"],["nbButton","","ghost","",3,"disabled","click"],[3,"icon"],["nbButton","","ghost","",3,"click",4,"ngIf"],["nbButton","","ghost","","status","primary"],[3,"value"],["nbTreeGridHeaderRow",""],["nbTreeGridRow","",3,"clickToToggle"],["nbTreeGridHeaderCell","",3,"nbSortHeader"],["nbTreeGridCell",""],[3,"expanded",4,"ngIf"],[3,"expanded"],["nbTreeGridHeaderCell",""],["ghost","","nbButton","","size","small",3,"disabled","click"],["nbButton","","ghost","",3,"click"]],template:function(t,e){if(1&t&&(o.Yb(0,"nb-card"),o.Yb(1,"nb-card-header"),o.Jc(2," Minhas solicita\xe7\xf5es "),o.Xb(),o.Yb(3,"nb-card-body"),o.Yb(4,"form",0),o.Yb(5,"div",1),o.Yb(6,"div",2),o.Yb(7,"label",3),o.Jc(8,"Status"),o.Xb(),o.Yb(9,"nb-select",4),o.Yb(10,"nb-option",5),o.Jc(11,"Todos"),o.Xb(),o.Hc(12,_,2,2,"nb-option",6),o.Xb(),o.Xb(),o.Yb(13,"div",7),o.Yb(14,"label",8),o.Jc(15,"Data de cria\xe7\xe3o:"),o.Xb(),o.Tb(16,"input",9),o.Tb(17,"nb-rangepicker",null,10),o.Xb(),o.Yb(19,"div",7),o.Yb(20,"label",8),o.Jc(21,"Data desejada:"),o.Xb(),o.Tb(22,"input",11),o.Tb(23,"nb-rangepicker",null,12),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(25,"nb-card-footer"),o.Yb(26,"button",13),o.gc("click",(function(){return e.buscar()})),o.Tb(27,"fa-icon",14),o.Jc(28,"buscar "),o.Xb(),o.Yb(29,"button",15),o.Tb(30,"fa-icon",14),o.Jc(31,"solicita\xe7\xe3o "),o.Xb(),o.Xb(),o.Xb(),o.Yb(32,"nb-card"),o.Yb(33,"nb-card-body"),o.Yb(34,"table",16),o.gc("sort",(function(t){return e.updateSort(t)})),o.Hc(35,H,1,0,"tr",17),o.Hc(36,L,1,1,"tr",18),o.Wb(37,19),o.Hc(38,B,2,1,"th",20),o.Hc(39,A,3,2,"td",21),o.Vb(),o.Wb(40,22),o.Hc(41,R,2,1,"th",20),o.Hc(42,I,2,1,"td",21),o.Vb(),o.Wb(43,23),o.Hc(44,z,2,1,"th",20),o.Hc(45,$,2,1,"td",21),o.Vb(),o.Wb(46,24),o.Hc(47,q,2,1,"th",20),o.Hc(48,E,2,1,"td",21),o.Vb(),o.Wb(49,25),o.Hc(50,V,2,0,"th",26),o.Hc(51,K,3,2,"td",21),o.Vb(),o.Xb(),o.Xb(),o.Yb(52,"nb-card-footer"),o.Yb(53,"button",27),o.Yb(54,"fa-icon",28),o.gc("click",(function(){return e.mudarPagina(1)})),o.Xb(),o.Xb(),o.Yb(55,"button",29),o.gc("click",(function(){return e.mudarPagina(e.pageNumber-2)})),o.Tb(56,"fa-icon",30),o.Xb(),o.Hc(57,W,2,1,"button",31),o.Yb(58,"button",32),o.Jc(59),o.Xb(),o.Hc(60,Q,2,1,"button",31),o.Yb(61,"button",29),o.gc("click",(function(){return e.mudarPagina(e.pageNumber+2)})),o.Tb(62,"fa-icon",30),o.Xb(),o.Yb(63,"button",29),o.gc("click",(function(){return e.mudarPagina(e.nOfPages)})),o.Tb(64,"fa-icon",30),o.Xb(),o.Xb(),o.Xb()),2&t){const t=o.yc(18),n=o.yc(24);o.Fb(4),o.rc("formGroup",e.filtro),o.Fb(8),o.rc("ngForOf",e.status),o.Fb(4),o.rc("nbDatepicker",t),o.Fb(6),o.rc("nbDatepicker",n),o.Fb(5),o.rc("icon",e.faSearch),o.Fb(3),o.rc("icon",e.faPlus),o.Fb(4),o.rc("nbTreeGrid",e.dataSource)("nbSort",e.dataSource),o.Fb(1),o.rc("nbTreeGridHeaderRowDef",e.allColumns),o.Fb(1),o.rc("nbTreeGridRowDefColumns",e.allColumns),o.Fb(1),o.rc("nbTreeGridColumnDef",e.customColumn),o.Fb(16),o.rc("disabled",1===e.pageNumber),o.Fb(1),o.rc("icon",e.faAngleDoubleLeft),o.Fb(1),o.rc("disabled",e.pageNumber<=2),o.Fb(1),o.rc("icon",e.faAngleLeft),o.Fb(1),o.rc("ngIf",e.pageNumber>1),o.Fb(2),o.Lc(" ",e.pageNumber," "),o.Fb(1),o.rc("ngIf",e.pageNumber<e.nOfPages),o.Fb(1),o.rc("disabled",e.pageNumber>=e.nOfPages-2),o.Fb(1),o.rc("icon",e.faAngleRight),o.Fb(1),o.rc("disabled",e.pageNumber===e.nOfPages),o.Fb(1),o.rc("icon",e.faAngleDoubleRight)}},directives:[O.x,O.A,O.w,x.z,x.o,x.g,O.mb,x.n,x.f,O.jb,a.m,O.S,x.b,O.J,O.kb,O.y,O.t,N.a,M.d,O.Gb,O.sb,O.Lb,O.Ob,O.Fb,O.Ib,O.Db,a.n,O.Kb,O.Nb,O.Jb,O.tb,O.Eb,O.Pb],styles:["button[nbTreeGridRowToggle][_ngcontent-%COMP%]{background:transparent;border:none;padding:0}.search-label[_ngcontent-%COMP%]{display:block}.search-input[_ngcontent-%COMP%]{margin-bottom:1rem}.nb-column-name[_ngcontent-%COMP%]{width:100%}@media screen and (min-width:400px){.nb-column-name[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:50%}}@media screen and (min-width:500px){.nb-column-kind[_ngcontent-%COMP%], .nb-column-name[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:33.333%}}@media screen and (min-width:600px){.nb-column-name[_ngcontent-%COMP%]{width:31%}.nb-column-items[_ngcontent-%COMP%], .nb-column-kind[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:23%}}"]}),t})(),U=(()=>{class t{constructor(t){this.ref=t}ngOnInit(){}cancel(){this.ref.close(!1)}submit(){this.ref.close(!0)}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(O.M))},t.\u0275cmp=o.Mb({type:t,selectors:[["ngx-dialog-show-sol-mobile"]],decls:10,vars:0,consts:[["nbButton","","status","danger",1,"cancel",3,"click"],["nbButton","","status","success",3,"click"]],template:function(t,e){1&t&&(o.Yb(0,"nb-card"),o.Yb(1,"nb-card-header"),o.Jc(2,"Confirme a altera\xe7\xe3o de status"),o.Xb(),o.Yb(3,"nb-card-body"),o.Jc(4," Voc\xea tem certeza que deseja solicitar o cancelamento? "),o.Xb(),o.Yb(5,"nb-card-footer"),o.Yb(6,"button",0),o.gc("click",(function(){return e.cancel()})),o.Jc(7,"Cancelar"),o.Xb(),o.Yb(8,"button",1),o.gc("click",(function(){return e.submit()})),o.Jc(9,"Solicitar"),o.Xb(),o.Xb(),o.Xb())},directives:[O.x,O.A,O.w,O.y,O.t],styles:["input[_ngcontent-%COMP%]{width:100%}.cancel[_ngcontent-%COMP%]{margin-right:2rem}"]}),t})();function tt(t,e){if(1&t&&(o.Yb(0,"nb-option",29),o.Jc(1),o.Xb()),2&t){const t=e.$implicit;o.rc("value",t.k),o.Fb(1),o.Kc(t.v)}}function et(t,e){if(1&t){const t=o.Zb();o.Yb(0,"nb-list-item",30),o.gc("click",(function(){o.Bc(t);const n=e.$implicit;return o.kc().toggleView(n)})),o.Yb(1,"span"),o.Jc(2),o.Xb(),o.Yb(3,"span",31),o.Jc(4),o.Xb(),o.Yb(5,"span"),o.Jc(6),o.Xb(),o.Xb()}if(2&t){const t=e.$implicit,n=o.kc();o.Fb(2),o.Kc(n.obterValorStatusEnum(t.status)),o.Fb(2),o.Kc(n.formatarData(t.dataDesejada)),o.Fb(2),o.Lc("R$",t.valorTotal.toFixed(2),"")}}function nt(t,e){if(1&t){const t=o.Zb();o.Yb(0,"button",32),o.gc("click",(function(){o.Bc(t);const e=o.kc();return e.mudarPagina(e.pageNumber-1)})),o.Jc(1),o.Xb()}if(2&t){const t=o.kc();o.Fb(1),o.Lc(" ",t.pageNumber-1," ")}}function at(t,e){if(1&t){const t=o.Zb();o.Yb(0,"button",32),o.gc("click",(function(){o.Bc(t);const e=o.kc();return e.mudarPagina(e.pageNumber+1)})),o.Jc(1),o.Xb()}if(2&t){const t=o.kc();o.Fb(1),o.Lc(" ",t.pageNumber+1," ")}}function ct(t,e){if(1&t&&(o.Yb(0,"nb-list-item",17),o.Yb(1,"span",33),o.Jc(2),o.Xb(),o.Yb(3,"span"),o.Jc(4),o.Xb(),o.Yb(5,"span"),o.Jc(6),o.Xb(),o.Xb()),2&t){const t=e.$implicit;o.Fb(2),o.Kc(t.produto.nome),o.Fb(2),o.Lc("",t.quantidade," Und."),o.Fb(2),o.Lc("R$ ",t.valor.toFixed(2),"")}}let it=(()=>{class t{constructor(t,e,n,a){this.fb=t,this.solicitacaoProdutoService=e,this.dialogService=n,this.toastrService=a,this.faSearch=D.h,this.faPlus=D.g,this.faAngleRight=D.d,this.faAngleLeft=D.c,this.faAngleDoubleLeft=D.a,this.faAngleDoubleRight=D.b,this.status=Object.keys(w.d).map(t=>({k:t,v:w.d[t]})),this.nPerPage=10,this.revealed=!1,this.pageNumber=1,this.faTrash=D.i,this.filtro=this.fb.group({dataCriacao:null,dataDesejada:null,status:null}),this.loading=!1}ngOnInit(){const t=Object(C.a)(new Date),e=Object(j.a)(new Date);this.filtro.patchValue({status:"ABERTO",dataCriacao:{start:t,end:e},dataDesejada:{start:t,end:e}}),this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe(t=>{this.data=t.solicitacoes,this.setLastPageAndCount(t.count)})}toggleView(t){this.revealed=!this.revealed,this.solicitacaoFlipada=t}buscar(){this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe(t=>{this.data=t.solicitacoes,this.setLastPageAndCount(t.count)})}formatarData(t){return Object(J.a)(new Date(t),"dd/MM/yyyy")}setLastPageAndCount(t){this.countSolicitacoes=t,this.nOfPages=Math.ceil(t/this.nPerPage)}mudarPagina(t){this.pageNumber=t,this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,this.pageNumber,this.nPerPage).subscribe(t=>{this.data=t.solicitacoes,this.setLastPageAndCount(t.count)})}obterValorStatusEnum(t){return w.d[t]}alterarStatus(t){this.dialogService.open(U).onClose.subscribe(e=>{e&&this.cancelar(t)})}cancelar(t){this.solicitacaoProdutoService.cancelar(t).subscribe(t=>{this.toastrService.info("Favor, aguarde aprova\xe7\xe3o do respons\xe1vel","Solicita\xe7\xe3o de cancelamento enviada",{duration:6e3}),this.buscar()})}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(x.c),o.Sb(y.a),o.Sb(O.N),o.Sb(O.yb))},t.\u0275cmp=o.Mb({type:t,selectors:[["ngx-lista-solicitacao-mobile"]],decls:75,vars:27,consts:[[3,"formGroup"],[1,"row","form-group"],[1,"form-group","col-md-4"],["for","Nome","required","",1,"label"],["placeholder","Status","formControlName","status","fullWidth",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","form-group"],[1,"label"],["nbInput","","formControlName","dataCriacao",3,"nbDatepicker"],["rangepicker",""],["nbInput","","formControlName","dataDesejada",3,"nbDatepicker"],["dataDesejada",""],["nbButton","","status","basic",2,"padding","6px","margin-right","8px",3,"click"],[2,"margin-right","5px",3,"icon"],["nbButton","","status","primary","routerLink","/pages/solicitacao-produto/solicitar",2,"padding","6px"],[1,"own-scroll",3,"showToggleButton","flipped"],[1,"item",2,"font-size","small"],["class","item","style","font-size: small;",3,"click",4,"ngFor","ngForOf"],["nbButton","","ghost","","size","small",3,"disabled"],[3,"icon","click"],["nbButton","","ghost","","size","small",3,"disabled","click"],[3,"icon"],["nbButton","","ghost","","size","small",3,"click",4,"ngIf"],["nbButton","","ghost","","size","small","status","primary"],[2,"flex","1","padding","3px"],[2,"flex","2","padding","3px"],["class","item","style","font-size: small;",4,"ngFor","ngForOf"],["ghost","","nbButton","","size","small",3,"disabled","click"],[3,"value"],[1,"item",2,"font-size","small",3,"click"],[2,"padding","5px"],["nbButton","","ghost","","size","small",3,"click"],[2,"flex","2"]],template:function(t,e){if(1&t&&(o.Yb(0,"nb-card"),o.Yb(1,"nb-card-header"),o.Jc(2," Minhas solicita\xe7\xf5es "),o.Xb(),o.Yb(3,"nb-card-body"),o.Yb(4,"form",0),o.Yb(5,"div",1),o.Yb(6,"div",2),o.Yb(7,"label",3),o.Jc(8,"Status"),o.Xb(),o.Yb(9,"nb-select",4),o.Yb(10,"nb-option",5),o.Jc(11,"Todos"),o.Xb(),o.Hc(12,tt,2,2,"nb-option",6),o.Xb(),o.Xb(),o.Yb(13,"div",7),o.Yb(14,"label",8),o.Jc(15,"Data de cria\xe7\xe3o:"),o.Xb(),o.Tb(16,"input",9),o.Tb(17,"nb-rangepicker",null,10),o.Xb(),o.Yb(19,"div",7),o.Yb(20,"label",8),o.Jc(21,"Data desejada:"),o.Xb(),o.Tb(22,"input",11),o.Tb(23,"nb-rangepicker",null,12),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(25,"nb-card-footer"),o.Yb(26,"button",13),o.gc("click",(function(){return e.buscar()})),o.Tb(27,"fa-icon",14),o.Jc(28,"buscar "),o.Xb(),o.Yb(29,"button",15),o.Tb(30,"fa-icon",14),o.Jc(31,"solicita\xe7\xe3o "),o.Xb(),o.Xb(),o.Xb(),o.Yb(32,"nb-flip-card",16),o.Yb(33,"nb-card-front"),o.Yb(34,"nb-card"),o.Yb(35,"nb-card-header",17),o.Yb(36,"span"),o.Jc(37,"Status"),o.Xb(),o.Yb(38,"span"),o.Jc(39,"Dt. Desejada"),o.Xb(),o.Yb(40,"span"),o.Jc(41,"Valor Total"),o.Xb(),o.Xb(),o.Yb(42,"nb-card-body"),o.Yb(43,"nb-list"),o.Hc(44,et,7,3,"nb-list-item",18),o.Xb(),o.Xb(),o.Yb(45,"nb-card-footer"),o.Yb(46,"button",19),o.Yb(47,"fa-icon",20),o.gc("click",(function(){return e.mudarPagina(1)})),o.Xb(),o.Xb(),o.Yb(48,"button",21),o.gc("click",(function(){return e.mudarPagina(e.pageNumber-2)})),o.Tb(49,"fa-icon",22),o.Xb(),o.Hc(50,nt,2,1,"button",23),o.Yb(51,"button",24),o.Jc(52),o.Xb(),o.Hc(53,at,2,1,"button",23),o.Yb(54,"button",21),o.gc("click",(function(){return e.mudarPagina(e.pageNumber+2)})),o.Tb(55,"fa-icon",22),o.Xb(),o.Yb(56,"button",21),o.gc("click",(function(){return e.mudarPagina(e.nOfPages)})),o.Tb(57,"fa-icon",22),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(58,"nb-card-back"),o.Yb(59,"nb-card"),o.Yb(60,"nb-card-header",17),o.Yb(61,"span",25),o.Yb(62,"fa-icon",20),o.gc("click",(function(){return e.toggleView()})),o.Xb(),o.Xb(),o.Yb(63,"span",26),o.Jc(64),o.Xb(),o.Yb(65,"span",26),o.Jc(66),o.Xb(),o.Yb(67,"span",26),o.Jc(68),o.Xb(),o.Xb(),o.Yb(69,"nb-card-body"),o.Yb(70,"nb-list"),o.Hc(71,ct,7,3,"nb-list-item",27),o.Xb(),o.Xb(),o.Yb(72,"nb-card-footer"),o.Yb(73,"button",28),o.gc("click",(function(){return e.alterarStatus(e.solicitacaoFlipada._id)})),o.Tb(74,"fa-icon",22),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb()),2&t){const t=o.yc(18),n=o.yc(24);o.Fb(4),o.rc("formGroup",e.filtro),o.Fb(8),o.rc("ngForOf",e.status),o.Fb(4),o.rc("nbDatepicker",t),o.Fb(6),o.rc("nbDatepicker",n),o.Fb(5),o.rc("icon",e.faSearch),o.Fb(3),o.rc("icon",e.faPlus),o.Fb(2),o.rc("showToggleButton",!1)("flipped",e.revealed),o.Fb(12),o.rc("ngForOf",e.data),o.Fb(2),o.rc("disabled",1===e.pageNumber),o.Fb(1),o.rc("icon",e.faAngleDoubleLeft),o.Fb(1),o.rc("disabled",e.pageNumber<=2),o.Fb(1),o.rc("icon",e.faAngleLeft),o.Fb(1),o.rc("ngIf",e.pageNumber>1),o.Fb(2),o.Lc(" ",e.pageNumber," "),o.Fb(1),o.rc("ngIf",e.pageNumber<e.nOfPages),o.Fb(1),o.rc("disabled",e.pageNumber>=e.nOfPages-2),o.Fb(1),o.rc("icon",e.faAngleRight),o.Fb(1),o.rc("disabled",e.pageNumber===e.nOfPages),o.Fb(1),o.rc("icon",e.faAngleDoubleRight),o.Fb(5),o.rc("icon",e.faAngleLeft),o.Fb(2),o.Kc(e.solicitacaoFlipada&&e.obterValorStatusEnum(e.solicitacaoFlipada.status)),o.Fb(2),o.Kc(e.solicitacaoFlipada&&e.formatarData(e.solicitacaoFlipada.dataDesejada)),o.Fb(2),o.Lc("R$",e.solicitacaoFlipada&&e.solicitacaoFlipada.valorTotal.toFixed(2),""),o.Fb(3),o.rc("ngForOf",e.solicitacaoFlipada&&e.solicitacaoFlipada.produtos),o.Fb(2),o.rc("disabled",e.solicitacaoFlipada&&"ABERTO"!==e.solicitacaoFlipada.status),o.Fb(1),o.rc("icon",e.faTrash)}},directives:[O.x,O.A,O.w,x.z,x.o,x.g,O.mb,x.n,x.f,O.jb,a.m,O.S,x.b,O.J,O.kb,O.y,O.t,N.a,M.d,O.O,O.z,O.bb,a.n,O.v,O.cb],styles:[".item[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}.item[_ngcontent-%COMP%]:first-child{border-top:none}"]}),t})();function ot(t,e){1&t&&o.Tb(0,"ngx-lista-solicitacao-desktop")}function rt(t,e){1&t&&o.Tb(0,"ngx-lista-solicitacao-mobile")}let bt=(()=>{class t{constructor(t){this.breakpointObserver=t,this.isHandset$=this.breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)").pipe(Object(c.a)(t=>t.matches),Object(i.a)())}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(F))},t.\u0275cmp=o.Mb({type:t,selectors:[["ngx-lista-solicitacao"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["mobileList",""]],template:function(t,e){if(1&t&&(o.Hc(0,ot,1,0,"ngx-lista-solicitacao-desktop",0),o.lc(1,"async"),o.Hc(2,rt,1,0,"ng-template",null,1,o.Ic)),2&t){const t=o.yc(3);o.rc("ngIf",!1===o.mc(1,2,e.isHandset$))("ngIfElse",t)}},directives:[a.n,Z,it],pipes:[a.b],styles:[""]}),t})();var st=n("oG2T");let lt=(()=>{class t{}return t.\u0275mod=o.Qb({type:t}),t.\u0275inj=o.Pb({factory:function(e){return new(e||t)},imports:[[a.c,O.db,O.B,a.c,O.B,x.u,x.h,O.u,O.T,M.g,O.K,st.a,N.b,O.nb]]}),t})(),ut=(()=>{class t{}return t.\u0275mod=o.Qb({type:t}),t.\u0275inj=o.Pb({factory:function(e){return new(e||t)},imports:[[a.c,O.Mb,O.B,x.u,x.h,O.u,O.T,M.g,O.K,N.b,O.nb,st.a]]}),t})(),dt=(()=>{class t{}return t.\u0275mod=o.Qb({type:t}),t.\u0275inj=o.Pb({factory:function(e){return new(e||t)},imports:[[a.c,lt,ut,M.g.forChild([{path:"",component:bt}])]]}),t})()},mrSG:function(t,e,n){"use strict";function a(t,e,n,a){var c,i=arguments.length,o=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,a);else for(var r=t.length-1;r>=0;r--)(c=t[r])&&(o=(i<3?c(o):i>3?c(e,n,o):c(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function c(t,e,n,a){return new(n||(n=Promise))((function(c,i){function o(t){try{b(a.next(t))}catch(e){i(e)}}function r(t){try{b(a.throw(t))}catch(e){i(e)}}function b(t){var e;t.done?c(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,r)}b((a=a.apply(t,e||[])).next())}))}n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}))}}]);