function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){r=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{XmbU:function(e,t,n){"use strict";n.r(t),n.d(t,"EditarModule",(function(){return j}));var i,o=n("ofXK"),a=n("tyNb"),r=n("zeoc"),s=n("3Pt+"),l=n("cnyc"),p=n("cHAT"),c=n("sWYD"),u=n("fXoL"),d=function(){function e(t){var n;_classCallCheck(this,e),this.rawFile=t;var i=(n=t)&&(n.nodeName||n.prop&&n.attr&&n.find)?t.value:t;this["_createFrom"+("string"==typeof i?"FakePath":"Object")](i)}return _createClass(e,[{key:"_createFromFakePath",value:function(e){this.lastModifiedDate=void 0,this.size=void 0,this.type="like/"+e.slice(e.lastIndexOf(".")+1).toLowerCase(),this.name=e.slice(e.lastIndexOf("/")+e.lastIndexOf("\\")+2)}},{key:"_createFromObject",value:function(e){this.size=e.size,this.type=e.type,this.name=e.name}}]),e}(),f=function(){function e(t,n,i){_classCallCheck(this,e),this.url="/",this.headers=[],this.withCredentials=!0,this.formData=[],this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.index=void 0,this.uploader=t,this.some=n,this.options=i,this.file=new d(n),this._file=n,t.options&&(this.method=t.options.method||"POST",this.alias=t.options.itemAlias||"file"),this.url=t.options.url}return _createClass(e,[{key:"upload",value:function(){try{this.uploader.uploadItem(this)}catch(e){this.uploader._onCompleteItem(this,"",0,{}),this.uploader._onErrorItem(this,"",0,{})}}},{key:"cancel",value:function(){this.uploader.cancelItem(this)}},{key:"remove",value:function(){this.uploader.removeFromQueue(this)}},{key:"onBeforeUpload",value:function(){}},{key:"onBuildForm",value:function(e){return{form:e}}},{key:"onProgress",value:function(e){return{progress:e}}},{key:"onSuccess",value:function(e,t,n){return{response:e,status:t,headers:n}}},{key:"onError",value:function(e,t,n){return{response:e,status:t,headers:n}}},{key:"onCancel",value:function(e,t,n){return{response:e,status:t,headers:n}}},{key:"onComplete",value:function(e,t,n){return{response:e,status:t,headers:n}}},{key:"_onBeforeUpload",value:function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()}},{key:"_onBuildForm",value:function(e){this.onBuildForm(e)}},{key:"_onProgress",value:function(e){this.progress=e,this.onProgress(e)}},{key:"_onSuccess",value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=void 0,this.onSuccess(e,t,n)}},{key:"_onError",value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=void 0,this.onError(e,t,n)}},{key:"_onCancel",value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=void 0,this.onCancel(e,t,n)}},{key:"_onComplete",value:function(e,t,n){this.onComplete(e,t,n),this.uploader.options.removeAfterUpload&&this.remove()}},{key:"_prepareToUploading",value:function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0}}]),e}(),m=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getMimeClass",value:function(e){var t="application";return-1!==this.mime_psd.indexOf(e.type)||e.type.match("image.*")?t="image":e.type.match("video.*")?t="video":e.type.match("audio.*")?t="audio":"application/pdf"===e.type?t="pdf":-1!==this.mime_compress.indexOf(e.type)?t="compress":-1!==this.mime_doc.indexOf(e.type)?t="doc":-1!==this.mime_xsl.indexOf(e.type)?t="xls":-1!==this.mime_ppt.indexOf(e.type)&&(t="ppt"),"application"===t&&(t=this.fileTypeDetection(e.name)),t}},{key:"fileTypeDetection",value:function(e){var t={jpg:"image",jpeg:"image",tif:"image",psd:"image",bmp:"image",png:"image",nef:"image",tiff:"image",cr2:"image",dwg:"image",cdr:"image",ai:"image",indd:"image",pin:"image",cdp:"image",skp:"image",stp:"image","3dm":"image",mp3:"audio",wav:"audio",wma:"audio",mod:"audio",m4a:"audio",compress:"compress",zip:"compress",rar:"compress","7z":"compress",lz:"compress",z01:"compress",bz2:"compress",gz:"compress",pdf:"pdf",xls:"xls",xlsx:"xls",ods:"xls",mp4:"video",avi:"video",wmv:"video",mpg:"video",mts:"video",flv:"video","3gp":"video",vob:"video",m4v:"video",mpeg:"video",m2ts:"video",mov:"video",doc:"doc",docx:"doc",eps:"doc",txt:"doc",odt:"doc",rtf:"doc",ppt:"ppt",pptx:"ppt",pps:"ppt",ppsx:"ppt",odp:"ppt"},n=e.split(".");if(n.length<2)return"application";var i=n[n.length-1].toLowerCase();return void 0===t[i]?"application":t[i]}}]),e}();return e.mime_doc=["application/msword","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"],e.mime_xsl=["application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.template.macroEnabled.12","application/vnd.ms-excel.addin.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],e.mime_ppt=["application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.addin.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],e.mime_psd=["image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd"],e.mime_compress=["application/x-gtar","application/x-gcompress","application/compress","application/x-tar","application/x-rar-compressed","application/octet-stream","application/x-zip-compressed","application/zip-compressed","application/x-7z-compressed","application/gzip","application/x-bzip2"],e}(),h=function(){function e(t){_classCallCheck(this,e),this.isUploading=!1,this.queue=[],this.progress=0,this._nextIndex=0,this.options={autoUpload:!1,isHTML5:!0,filters:[],removeAfterUpload:!1,disableMultipart:!1,formatDataFunction:function(e){return e._file},formatDataFunctionIsAsync:!1},this.setOptions(t),this.response=new u.o}return _createClass(e,[{key:"setOptions",value:function(e){this.options=Object.assign(this.options,e),this.authToken=this.options.authToken,this.authTokenHeader=this.options.authTokenHeader||"Authorization",this.autoUpload=this.options.autoUpload,this.options.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.options.maxFileSize&&this.options.filters.unshift({name:"fileSize",fn:this._fileSizeFilter}),this.options.allowedFileType&&this.options.filters.unshift({name:"fileType",fn:this._fileTypeFilter}),this.options.allowedMimeType&&this.options.filters.unshift({name:"mimeType",fn:this._mimeTypeFilter});for(var t=0;t<this.queue.length;t++)this.queue[t].url=this.options.url}},{key:"addToQueue",value:function(e,t,n){var i,o=this,a=[],r=_createForOfIteratorHelper(e);try{for(r.s();!(i=r.n()).done;){var s=i.value;a.push(s)}}catch(u){r.e(u)}finally{r.f()}var l=this._getFilters(n),p=this.queue.length,c=[];a.map((function(e){t||(t=o.options);var n=new d(e);if(o._isValidFile(n,l,t)){var i=new f(o,e,t);c.push(i),o.queue.push(i),o._onAfterAddingFile(i)}else o._onWhenAddingFileFailed(n,l[o._failFilterIndex],t)})),this.queue.length!==p&&(this._onAfterAddingAll(c),this.progress=this._getTotalProgress()),this._render(),this.options.autoUpload&&this.uploadAll()}},{key:"removeFromQueue",value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t];n.isUploading&&n.cancel(),this.queue.splice(t,1),this.progress=this._getTotalProgress()}},{key:"clearQueue",value:function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0}},{key:"uploadItem",value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t],i=this.options.isHTML5?"_xhrTransport":"_iframeTransport";n._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[i](n))}},{key:"cancelItem",value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t];n&&n.isUploading&&(this.options.isHTML5?n._xhr:n._form).abort()}},{key:"uploadAll",value:function(){var e=this.getNotUploadedItems().filter((function(e){return!e.isUploading}));e.length&&(e.map((function(e){return e._prepareToUploading()})),e[0].upload())}},{key:"cancelAll",value:function(){this.getNotUploadedItems().map((function(e){return e.cancel()}))}},{key:"isFile",value:function(e){return function(e){return File&&e instanceof File}(e)}},{key:"isFileLikeObject",value:function(e){return e instanceof d}},{key:"getIndexOfItem",value:function(e){return"number"==typeof e?e:this.queue.indexOf(e)}},{key:"getNotUploadedItems",value:function(){return this.queue.filter((function(e){return!e.isUploaded}))}},{key:"getReadyItems",value:function(){return this.queue.filter((function(e){return e.isReady&&!e.isUploading})).sort((function(e,t){return e.index-t.index}))}},{key:"destroy",value:function(){}},{key:"onAfterAddingAll",value:function(e){return{fileItems:e}}},{key:"onBuildItemForm",value:function(e,t){return{fileItem:e,form:t}}},{key:"onAfterAddingFile",value:function(e){return{fileItem:e}}},{key:"onWhenAddingFileFailed",value:function(e,t,n){return{item:e,filter:t,options:n}}},{key:"onBeforeUploadItem",value:function(e){return{fileItem:e}}},{key:"onProgressItem",value:function(e,t){return{fileItem:e,progress:t}}},{key:"onProgressAll",value:function(e){return{progress:e}}},{key:"onSuccessItem",value:function(e,t,n,i){return{item:e,response:t,status:n,headers:i}}},{key:"onErrorItem",value:function(e,t,n,i){return{item:e,response:t,status:n,headers:i}}},{key:"onCancelItem",value:function(e,t,n,i){return{item:e,response:t,status:n,headers:i}}},{key:"onCompleteItem",value:function(e,t,n,i){return{item:e,response:t,status:n,headers:i}}},{key:"onCompleteAll",value:function(){}},{key:"_mimeTypeFilter",value:function(e){return!(this.options.allowedMimeType&&-1===this.options.allowedMimeType.indexOf(e.type))}},{key:"_fileSizeFilter",value:function(e){return!(this.options.maxFileSize&&e.size>this.options.maxFileSize)}},{key:"_fileTypeFilter",value:function(e){return!(this.options.allowedFileType&&-1===this.options.allowedFileType.indexOf(m.getMimeClass(e)))}},{key:"_onErrorItem",value:function(e,t,n,i){e._onError(t,n,i),this.onErrorItem(e,t,n,i)}},{key:"_onCompleteItem",value:function(e,t,n,i){e._onComplete(t,n,i),this.onCompleteItem(e,t,n,i);var o=this.getReadyItems()[0];this.isUploading=!1,o?o.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),this._render())}},{key:"_headersGetter",value:function(e){return function(t){return t?e[t.toLowerCase()]||void 0:e}}},{key:"_xhrTransport",value:function(e){var t,n=this,i=this,o=e._xhr=new XMLHttpRequest;if(this._onBeforeUploadItem(e),"number"!=typeof e._file.size)throw new TypeError("The file specified is no longer valid");if(this.options.disableMultipart)t=this.options.formatDataFunction(e);else{t=new FormData,this._onBuildItemForm(e,t);var a=function(){return t.append(e.alias,e._file,e.file.name)};this.options.parametersBeforeFiles||a(),void 0!==this.options.additionalParameter&&Object.keys(this.options.additionalParameter).forEach((function(i){var o=n.options.additionalParameter[i];"string"==typeof o&&o.indexOf("{{file_name}}")>=0&&(o=o.replace("{{file_name}}",e.file.name)),t.append(i,o)})),this.options.parametersBeforeFiles&&a()}if(o.upload.onprogress=function(t){var i=Math.round(t.lengthComputable?100*t.loaded/t.total:0);n._onProgressItem(e,i)},o.onload=function(){var t=n._parseHeaders(o.getAllResponseHeaders()),i=n._transformResponse(o.response,t);n["_on"+(n._isSuccessCode(o.status)?"Success":"Error")+"Item"](e,i,o.status,t),n._onCompleteItem(e,i,o.status,t)},o.onerror=function(){var t=n._parseHeaders(o.getAllResponseHeaders()),i=n._transformResponse(o.response,t);n._onErrorItem(e,i,o.status,t),n._onCompleteItem(e,i,o.status,t)},o.onabort=function(){var t=n._parseHeaders(o.getAllResponseHeaders()),i=n._transformResponse(o.response,t);n._onCancelItem(e,i,o.status,t),n._onCompleteItem(e,i,o.status,t)},o.open(e.method,e.url,!0),o.withCredentials=e.withCredentials,this.options.headers){var r,s=_createForOfIteratorHelper(this.options.headers);try{for(s.s();!(r=s.n()).done;){var l=r.value;o.setRequestHeader(l.name,l.value)}}catch(d){s.e(d)}finally{s.f()}}if(e.headers.length){var p,c=_createForOfIteratorHelper(e.headers);try{for(c.s();!(p=c.n()).done;){var u=p.value;o.setRequestHeader(u.name,u.value)}}catch(d){c.e(d)}finally{c.f()}}this.authToken&&o.setRequestHeader(this.authTokenHeader,this.authToken),o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&i.response.emit(o.responseText)},this.options.formatDataFunctionIsAsync?t.then((function(e){return o.send(JSON.stringify(e))})):o.send(t),this._render()}},{key:"_getTotalProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.options.removeAfterUpload)return e;var t=this.getNotUploadedItems().length,n=100/this.queue.length;return Math.round((t?this.queue.length-t:this.queue.length)*n+e*n/100)}},{key:"_getFilters",value:function(e){if(!e)return this.options.filters;if(Array.isArray(e))return e;if("string"==typeof e){var t=e.match(/[^\s,]+/g);return this.options.filters.filter((function(e){return-1!==t.indexOf(e.name)}))}return this.options.filters}},{key:"_render",value:function(){}},{key:"_queueLimitFilter",value:function(){return void 0===this.options.queueLimit||this.queue.length<this.options.queueLimit}},{key:"_isValidFile",value:function(e,t,n){var i=this;return this._failFilterIndex=-1,!t.length||t.every((function(t){return i._failFilterIndex++,t.fn.call(i,e,n)}))}},{key:"_isSuccessCode",value:function(e){return e>=200&&e<300||304===e}},{key:"_transformResponse",value:function(e,t){return e}},{key:"_parseHeaders",value:function(e){var t,n,i,o={};return e?(e.split("\n").map((function(e){i=e.indexOf(":"),t=e.slice(0,i).trim().toLowerCase(),n=e.slice(i+1).trim(),t&&(o[t]=o[t]?o[t]+", "+n:n)})),o):o}},{key:"_onWhenAddingFileFailed",value:function(e,t,n){this.onWhenAddingFileFailed(e,t,n)}},{key:"_onAfterAddingFile",value:function(e){this.onAfterAddingFile(e)}},{key:"_onAfterAddingAll",value:function(e){this.onAfterAddingAll(e)}},{key:"_onBeforeUploadItem",value:function(e){e._onBeforeUpload(),this.onBeforeUploadItem(e)}},{key:"_onBuildItemForm",value:function(e,t){e._onBuildForm(t),this.onBuildItemForm(e,t)}},{key:"_onProgressItem",value:function(e,t){var n=this._getTotalProgress(t);this.progress=n,e._onProgress(t),this.onProgressItem(e,t),this.onProgressAll(n),this._render()}},{key:"_onSuccessItem",value:function(e,t,n,i){e._onSuccess(t,n,i),this.onSuccessItem(e,t,n,i)}},{key:"_onCancelItem",value:function(e,t,n,i){e._onCancel(t,n,i),this.onCancelItem(e,t,n,i)}}]),e}(),v=((i=function e(){_classCallCheck(this,e)}).\u0275mod=u.Qb({type:i}),i.\u0275inj=u.Pb({factory:function(e){return new(e||i)},imports:[[o.c]]}),i),g=n("MAky"),b=n("qXBG"),y=n("aceb"),x=n("tk/3"),k=n("TT0I"),_=n("RSER");function w(e,t){if(1&e&&(u.Yb(0,"nb-alert",20),u.Jc(1),u.Xb()),2&e){var n=u.kc();u.Fb(1),u.Lc("Solicitado corre\xe7\xe3o por: ",n.justicativaCorrecao,"")}}function C(e,t){if(1&e&&(u.Yb(0,"nb-option",9),u.Jc(1),u.Xb()),2&e){var n=t.$implicit;u.rc("value",n.n),u.Fb(1),u.Kc(n.mes)}}function F(e,t){1&e&&(u.Yb(0,"h3"),u.Jc(1,"Escolha ou coloque o arquivo/img do comprovante"),u.Xb())}function I(e,t){if(1&e&&(u.Yb(0,"div"),u.Tb(1,"nb-icon",21),u.Yb(2,"label",5),u.Jc(3),u.Xb(),u.Xb()),2&e){var n=u.kc();u.Fb(3),u.Kc(n.form.value.file)}}function A(e,t){1&e&&(u.Yb(0,"div",3),u.Yb(1,"div",22),u.Yb(2,"label",5),u.Jc(3,"Justificativa do atraso"),u.Xb(),u.Tb(4,"textarea",23),u.Xb(),u.Xb())}var O,P,M,T=[{path:":id",component:(O=function(){function e(t,n,i,o,a,r,p){var c=this;_classCallCheck(this,e),this.route=t,this.partilhaService=n,this.fb=i,this.router=o,this.toastrService=a,this.authService=r,this.http=p,this.formData=new FormData,this.ReqJson={},this.imageurl="".concat(g.c,"/partilha/obterDoc/f4b5164f-1993-4903-8867-2bad19fd8221-1596485555705.jpeg"),this.isImageLoading=!1,this.anoAtual=Object(l.a)(new Date),this.form=this.fb.group({mes:null,ano:null,valorComprovante:[null,s.x.required],justificativaAtraso:null,file:[null,s.x.required]}),this.justicativaCorrecao="",this.todosMeses=[{n:0,mes:"Janeiro"},{n:1,mes:"Fevereiro"},{n:2,mes:"Mar\xe7o"},{n:3,mes:"Abril"},{n:4,mes:"Maio"},{n:5,mes:"Junho"},{n:6,mes:"Julho"},{n:7,mes:"Agosto"},{n:8,mes:"Setembro"},{n:9,mes:"Outubro"},{n:10,mes:"Novembro"},{n:11,mes:"Dezembro"}],this.uploader=new h({url:"".concat(g.c,"/partilha/enviarDoc"),authToken:"".concat(this.authService.getToken()),removeAfterUpload:!1,autoUpload:!0}),this.hasBaseDropZoneOver=!1,this.hasAnotherDropZoneOver=!1,this.uploader.onAfterAddingFile=function(e){e.withCredentials=!1},this.response="",this.uploader.response.subscribe((function(e){return c.response=e}))}return _createClass(e,[{key:"uploadFiles",value:function(e){e.length>0&&(this.image=e[0],this.form.patchValue({file:this.image.name}))}},{key:"fileOverBase",value:function(e){this.hasBaseDropZoneOver=e}},{key:"enviarDoc",value:function(e){var t=this,n=new FormData;n.append("file",this.image,this.image.name),this.http.post("".concat(g.c,"/partilha/enviarDoc"),n,{params:{comprovanteId:"--"+e}}).subscribe((function(e){t.toastrService.success("Doc enviado com sucesso")}),(function(e){return t.toastrService.danger("erro ao enviar o arquivo, favor tentar novamente")}))}},{key:"fileOverAnother",value:function(e){this.hasAnotherDropZoneOver=e}},{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.id=t.id,"novo"===e.id?e.headerMessage="Enviar comprovante":e.partilhaService.obterPartilha(e.id).subscribe((function(t){e.form.patchValue(Object.assign({},t)),e.justicativaCorrecao=t.justicativaCorrecao}),(function(t){e.toastrService.danger(t.error.erros,"Erro!"),e.router.navigate(["/pages/partilha-solidaria/lista"])}))}));var t=Object(p.a)(new Date);this.form.patchValue({mes:t,ano:this.anoAtual}),this.meses=this.todosMeses.filter((function(e){return e.n<=t})),this.dataPrevistaRecebimento=this.partilhaService.calculaDataPrevista(t,this.anoAtual),this.form.controls.mes.valueChanges.subscribe((function(t){e.dataPrevistaRecebimento=e.partilhaService.calculaDataPrevista(t,e.form.value.ano),e.justificativaValidator(t,e.form.value.ano)})),this.form.controls.ano.valueChanges.subscribe((function(n){n===e.anoAtual?(e.meses=e.todosMeses.filter((function(e){return e.n<=t})),e.form.patchValue({mes:t})):e.meses=e.todosMeses,e.justificativaValidator(e.form.value.mes,n),e.partilhaService.calculaDataPrevista(e.form.value.mes,n)}))}},{key:"justificativaValidator",value:function(e,t){var n=Object(p.a)(new Date);this.form.controls.justificativaAtraso.setValidators(this.anoAtual===t&&n===e?null:s.x.required)}},{key:"enviar",value:function(){var e=this;this.form.valid&&("novo"===this.id?this.partilhaService.enviarComprovante(this.form.value).subscribe((function(t){t&&(e.enviarDoc(t._id),e.router.navigate(["./pages/partilha-solidaria/lista"]))})):this.partilhaService.enviarComprovante(Object.assign(Object.assign({},this.form.value),{id:this.id})).subscribe((function(t){t&&e.router.navigate(["./pages/partilha-solidaria/lista"])})))}},{key:"formataData",value:function(e){return Object(c.a)(e,"dd/MM/yyyy")}}]),e}(),O.\u0275fac=function(e){return new(e||O)(u.Sb(a.a),u.Sb(r.a),u.Sb(s.c),u.Sb(a.c),u.Sb(y.yb),u.Sb(b.a),u.Sb(x.b))},O.\u0275cmp=u.Mb({type:O,selectors:[["ngx-editar"]],decls:36,vars:14,consts:[[3,"status"],["status","warning",4,"ngIf"],[3,"formGroup"],[1,"form-group","row"],[1,"form-group","col-md-4"],[1,"label"],["formControlName","mes","fullWidth",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","ano","fullWidth",""],[3,"value"],[1,"form-group","col-md-3"],["for","valor",1,"label"],["shape","round","type","tel","nbInput","","currencyMask","","placeholder","Valor do comprovante","fullWidth","","id","valor","formControlName","valorComprovante","maxlength","15"],[1,"form-group","col"],["dnd","",1,"container",3,"fileDropped"],["type","file","id","fileDropRef",3,"change"],["fileDropRef",""],[4,"ngIf"],["class","form-group row",4,"ngIf"],["nbButton","","status","primary",3,"disabled","click"],["status","warning"],["icon","file-outline"],[1,"form-group","col-md-6"],["nbInput","","formControlName","justificativaAtraso","fullWidth",""]],template:function(e,t){1&e&&(u.Yb(0,"nb-alert",0),u.Jc(1),u.Xb(),u.Hc(2,w,2,1,"nb-alert",1),u.Yb(3,"nb-card"),u.Yb(4,"nb-card-header"),u.Jc(5),u.Xb(),u.Yb(6,"nb-card-body"),u.Yb(7,"form",2),u.Yb(8,"div",3),u.Yb(9,"div",4),u.Yb(10,"label",5),u.Jc(11,"M\xeas"),u.Xb(),u.Yb(12,"nb-select",6),u.Hc(13,C,2,2,"nb-option",7),u.Xb(),u.Xb(),u.Yb(14,"div",4),u.Yb(15,"label",5),u.Jc(16,"Ano"),u.Xb(),u.Yb(17,"nb-select",8),u.Yb(18,"nb-option",9),u.Jc(19),u.Xb(),u.Yb(20,"nb-option",9),u.Jc(21),u.Xb(),u.Xb(),u.Xb(),u.Yb(22,"div",10),u.Yb(23,"label",11),u.Jc(24,"Valor do comprovante"),u.Xb(),u.Tb(25,"input",12),u.Xb(),u.Yb(26,"div",13),u.Yb(27,"div",14),u.gc("fileDropped",(function(e){return t.uploadFiles(e)})),u.Yb(28,"input",15,16),u.gc("change",(function(e){return t.uploadFiles(e.target.files)})),u.Xb(),u.Hc(30,F,2,0,"h3",17),u.Hc(31,I,4,1,"div",17),u.Xb(),u.Xb(),u.Xb(),u.Hc(32,A,5,0,"div",18),u.Xb(),u.Xb(),u.Yb(33,"nb-card-footer"),u.Yb(34,"button",19),u.gc("click",(function(){return t.enviar()})),u.Jc(35," Enviar "),u.Xb(),u.Xb(),u.Xb()),2&e&&(u.rc("status",t.dataPrevistaRecebimento.success?"success":"warning"),u.Fb(1),u.Lc("Data prevista para recebimento: ",t.formataData(t.dataPrevistaRecebimento.data),""),u.Fb(1),u.rc("ngIf",t.justicativaCorrecao),u.Fb(3),u.Kc(t.headerMessage),u.Fb(2),u.rc("formGroup",t.form),u.Fb(6),u.rc("ngForOf",t.meses),u.Fb(5),u.rc("value",t.anoAtual-1),u.Fb(1),u.Kc(t.anoAtual-1),u.Fb(1),u.rc("value",t.anoAtual),u.Fb(1),u.Kc(t.anoAtual),u.Fb(9),u.rc("ngIf",!t.form.value.file),u.Fb(1),u.rc("ngIf",t.form.value.file),u.Fb(1),u.rc("ngIf",!t.dataPrevistaRecebimento.success),u.Fb(2),u.rc("disabled",t.form.invalid))},directives:[y.o,o.n,y.x,y.A,y.w,s.z,s.o,s.g,y.mb,s.n,s.f,o.m,y.jb,y.S,s.b,k.a,s.i,_.a,y.y,y.t,y.P],styles:[".container[_ngcontent-%COMP%]{padding:2rem;border:1px dashed #0ec2e6;position:relative;margin:0 auto;display:-webkit-box;display:flex;text-align:center;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;overflow:hidden}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:180px;height:180px;margin-left:15px}.container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#38424c}.container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:200;color:#38424c}.fileover[_ngcontent-%COMP%]{-webkit-animation:shake 1s;animation:shake 1s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.files-list[_ngcontent-%COMP%]{margin-top:1.5rem}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]{display:-webkit-box;padding:.5rem;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;border:1px dashed #979797;margin-bottom:1rem;display:flex;-webkit-box-flex:1;flex-grow:1}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   img.delete[_ngcontent-%COMP%]{margin-left:.5rem;cursor:pointer;align-self:flex-end}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#353f4a;margin:0}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#a4a4a4;margin:0 0 .25rem}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:100%}@-webkit-keyframes shake{0%{-webkit-transform:translate(1px,1px) rotate(0deg);transform:translate(1px,1px) rotate(0deg)}10%{-webkit-transform:translate(-1px,-2px) rotate(-1deg);transform:translate(-1px,-2px) rotate(-1deg)}20%{-webkit-transform:translate(-3px) rotate(1deg);transform:translate(-3px) rotate(1deg)}30%{-webkit-transform:translate(3px,2px) rotate(0deg);transform:translate(3px,2px) rotate(0deg)}40%{-webkit-transform:translate(1px,-1px) rotate(1deg);transform:translate(1px,-1px) rotate(1deg)}50%{-webkit-transform:translate(-1px,2px) rotate(-1deg);transform:translate(-1px,2px) rotate(-1deg)}60%{-webkit-transform:translate(-3px,1px) rotate(0deg);transform:translate(-3px,1px) rotate(0deg)}70%{-webkit-transform:translate(3px,1px) rotate(-1deg);transform:translate(3px,1px) rotate(-1deg)}80%{-webkit-transform:translate(-1px,-1px) rotate(1deg);transform:translate(-1px,-1px) rotate(1deg)}90%{-webkit-transform:translate(1px,2px) rotate(0deg);transform:translate(1px,2px) rotate(0deg)}to{-webkit-transform:translate(1px,-2px) rotate(-1deg);transform:translate(1px,-2px) rotate(-1deg)}}@keyframes shake{0%{-webkit-transform:translate(1px,1px) rotate(0deg);transform:translate(1px,1px) rotate(0deg)}10%{-webkit-transform:translate(-1px,-2px) rotate(-1deg);transform:translate(-1px,-2px) rotate(-1deg)}20%{-webkit-transform:translate(-3px) rotate(1deg);transform:translate(-3px) rotate(1deg)}30%{-webkit-transform:translate(3px,2px) rotate(0deg);transform:translate(3px,2px) rotate(0deg)}40%{-webkit-transform:translate(1px,-1px) rotate(1deg);transform:translate(1px,-1px) rotate(1deg)}50%{-webkit-transform:translate(-1px,2px) rotate(-1deg);transform:translate(-1px,2px) rotate(-1deg)}60%{-webkit-transform:translate(-3px,1px) rotate(0deg);transform:translate(-3px,1px) rotate(0deg)}70%{-webkit-transform:translate(3px,1px) rotate(-1deg);transform:translate(3px,1px) rotate(-1deg)}80%{-webkit-transform:translate(-1px,-1px) rotate(1deg);transform:translate(-1px,-1px) rotate(1deg)}90%{-webkit-transform:translate(1px,2px) rotate(0deg);transform:translate(1px,2px) rotate(0deg)}to{-webkit-transform:translate(1px,-2px) rotate(-1deg);transform:translate(1px,-2px) rotate(-1deg)}}"]}),O)}],S=((P=function e(){_classCallCheck(this,e)}).\u0275mod=u.Qb({type:P}),P.\u0275inj=u.Pb({factory:function(e){return new(e||P)},imports:[[a.g.forChild(T)],a.g]}),P),U=n("O+SD"),D=n("wWZX"),j=((M=function e(){_classCallCheck(this,e)}).\u0275mod=u.Qb({type:M}),M.\u0275inj=u.Pb({factory:function(e){return new(e||M)},imports:[[o.c,S,s.u,s.h,y.B,y.nb,y.u,y.T,y.p,v,D.PerfilModule,k.b.forRoot(U.customCurrencyMaskConfig),y.R]]}),M)}}]);