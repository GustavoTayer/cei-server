(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{RSER:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var a=r("fXoL");let o=(()=>{class t{constructor(){this.fileDropped=new a.o}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.fileOver=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.fileOver=!1}ondrop(t){t.preventDefault(),t.stopPropagation(),this.fileOver=!1;const e=t.dataTransfer.files;e.length>0&&this.fileDropped.emit(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.Nb({type:t,selectors:[["","dnd",""]],hostVars:2,hostBindings:function(t,e){1&t&&a.gc("dragover",(function(t){return e.onDragOver(t)}))("dragleave",(function(t){return e.onDragLeave(t)}))("drop",(function(t){return e.ondrop(t)})),2&t&&a.Jb("fileover",e.fileOver)},outputs:{fileDropped:"fileDropped"}}),t})()},dLU1:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var a=r("/h9T"),o=r("/Tr7"),n=r("jIYg");function i(t){Object(n.a)(1,arguments);var e=Object(o.a)(t),r=e.getFullYear(),a=e.getMonth(),i=new Date(0);return i.setFullYear(r,a+1,0),i.setHours(0,0,0,0),i.getDate()}function s(t,e){Object(n.a)(2,arguments);var r=Object(o.a)(t),s=Object(a.a)(e),c=r.getMonth()+s,l=new Date(0);l.setFullYear(r.getFullYear(),c,1),l.setHours(0,0,0,0);var d=i(l);return r.setMonth(c,Math.min(d,r.getDate())),r}},esi0:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var a=r("MAky"),o=r("lJxs"),n=r("JIr8"),i=r("LRne"),s=r("fXoL"),c=r("tk/3"),l=r("aceb"),d=r("tyNb");let u=(()=>{class t{constructor(t,e,r){this.http=t,this.toastrService=e,this.router=r,this.url=`${a.c}/equipe`}lista(){return this.http.get(`${this.url}/lista`)}criar(t){return this.http.post(`${this.url}/criar`,t).pipe(Object(o.a)(t=>{this.toastrService.success("Agora voc\xea pode definir membros e criar fun\xe7\xf5es","Equipe criada com sucesso"),this.router.navigate([`/pages/admin/equipe/editar/${t._id}`])}),Object(n.a)(t=>(this.toastrService.danger(t,"Erro!"),Object(i.a)(!1))))}adicionarMembro(t,e){return this.http.post(`${this.url}/adicionarMembro`,{id:t,usuarioId:e})}buscarPorId(t){return this.http.post(`${this.url}/buscarPorId`,{id:t})}buscarMinhaEquipe(){return this.http.get(`${this.url}/buscarMinhaEquipe`)}select(){return this.http.get(`${this.url}/select`)}usuariosSemEquipeSelect(t){return this.http.post(`${this.url}/usuariosSemEquipeSelect`,{q:t})}criarCargo(t){return this.http.post(`${this.url}/criarCargo`,t).pipe(Object(o.a)(t=>(this.toastrService.success("","Cargo criado com sucesso"),t)),Object(n.a)(t=>(this.toastrService.danger(t,"Erro!"),Object(i.a)({nome:""}))))}removerMembro(t,e){return this.http.post(`${this.url}/removerMembro`,{id:t,usuarioId:e}).pipe(Object(o.a)(t=>(this.toastrService.success("","Membro removido com sucesso"),t)),Object(n.a)(t=>(this.toastrService.danger(t,"Erro!"),Object(i.a)({nome:""}))))}removerCargo(t,e){return this.http.post(`${this.url}/removerCargo`,{id:t,cargoId:e}).pipe(Object(o.a)(t=>(this.toastrService.success("","Cargo removido com sucesso"),t)),Object(n.a)(t=>(this.toastrService.danger(t,"Erro!"),Object(i.a)(!1))))}adicionarCargoUsuario(t,e,r){return this.http.post(`${this.url}/adicionarCargoUsuario`,{id:t,usuarioId:e,cargoId:r}).pipe(Object(o.a)(t=>(this.toastrService.success("","Membro removido com sucesso"),t)),Object(n.a)(t=>(this.toastrService.danger(t,"Erro!"),Object(i.a)(!1))))}}return t.\u0275fac=function(e){return new(e||t)(s.cc(c.b),s.cc(l.yb),s.cc(d.c))},t.\u0275prov=s.Ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"sdC+":function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var a=r("/h9T"),o=r("dLU1"),n=r("jIYg");function i(t,e){Object(n.a)(2,arguments);var r=Object(a.a)(e);return Object(o.a)(t,12*r)}function s(t,e){Object(n.a)(2,arguments);var r=Object(a.a)(e);return i(t,-r)}},vI6V:function(t,e,r){"use strict";r.d(e,"d",(function(){return a})),r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return i}));var a=function(t){return t.ABERTO="Aberto",t.PRODUZINDO="Produzindo",t.ENTREGUE="Entregue",t.PAGO="Pago",t.CANCELADO="Cancelado",t.SLC_CANCELAMENTO="Slc. Canc.",t}({}),o=function(t){return t.PROPEDEUTICO="Proped\xeautico",t.FILOSOFIA="Filosofia",t.TEOLOGIA="Teologia",t.TIROCINIO="Tiroc\xednio",t}({}),n=function(t){return t.SEMINARISTA="Seminarista",t.FORMADOR="Formador",t.REITOR="Reitor",t.CONSELHO_GESTOR="Conselho Gestor",t.OUTROS="Outros",t}({}),i=function(t){return t.EM_ANALISE="Em an\xe1lise",t.CORRECAO="Solicitado corre\xe7\xe3o",t.APROVADO="Aprovado",t.DEPOSITADO="Depositado",t}({})},wWZX:function(t,e,r){"use strict";r.r(e),r.d(e,"PerfilModule",(function(){return E}));var a=r("ofXK"),o=r("tyNb"),n=r("vI6V"),i=r("3Pt+"),s=r("v8Ly"),c=r("sdC+"),l=r("esi0"),d=r("MAky"),u=r("fXoL"),b=r("tk/3"),p=r("aceb"),f=r("RSER");function m(t,e){1&t&&(u.Yb(0,"p",32),u.Jc(1," Campo obrigat\xf3rio! "),u.Xb())}function g(t,e){1&t&&(u.Yb(0,"p",32),u.Jc(1," Campo obrigat\xf3rio! "),u.Xb())}function h(t,e){1&t&&(u.Yb(0,"p",32),u.Jc(1," Favor digitar uma data v\xe1lida! "),u.Xb())}function v(t,e){if(1&t&&(u.Yb(0,"nb-option",33),u.Jc(1),u.Xb()),2&t){const t=e.$implicit;u.rc("value",t._id),u.Fb(1),u.Kc(t.nome)}}function x(t,e){if(1&t&&(u.Yb(0,"nb-option",33),u.Jc(1),u.Xb()),2&t){const t=e.$implicit;u.rc("value",t.k),u.Fb(1),u.Kc(t.v)}}function O(t,e){if(1&t&&(u.Yb(0,"nb-option",33),u.Jc(1),u.Xb()),2&t){const t=e.$implicit;u.rc("value",t.k),u.Fb(1),u.Kc(t.v)}}function w(t,e){1&t&&(u.Yb(0,"p",32),u.Jc(1," Campo obrigat\xf3rio! "),u.Xb())}function C(t,e){1&t&&(u.Yb(0,"p",32),u.Jc(1," Senha precisar ter: uma letra mai\xfascula, uma letra min\xfascula, um n\xfamero, um caractere especial (@#$%) e tamanho entre 6-20. "),u.Xb())}function k(t,e){1&t&&(u.Yb(0,"p",32),u.Jc(1," Campo obrigat\xf3rio! "),u.Xb())}function S(t,e){1&t&&(u.Yb(0,"p",32),u.Jc(1," As senhas est\xe3o diferentes "),u.Xb())}function Y(t,e){if(1&t&&(u.Wb(0),u.Yb(1,"div",10),u.Yb(2,"label",34),u.Jc(3,"Senha "),u.Xb(),u.Tb(4,"input",35),u.Hc(5,w,2,0,"p",13),u.Hc(6,C,2,0,"p",13),u.Xb(),u.Yb(7,"div",10),u.Yb(8,"label",34),u.Jc(9,"confirmar senha "),u.Xb(),u.Tb(10,"input",36),u.Hc(11,k,2,0,"p",13),u.Hc(12,S,2,0,"p",13),u.Xb(),u.Vb()),2&t){const t=u.kc();u.Fb(4),u.rc("status",t.verificaValidacaoCampo("password")?"danger":"basic"),u.Fb(1),u.rc("ngIf",t.verificaValidacaoCampo("password","required")),u.Fb(1),u.rc("ngIf",t.verificaValidacaoCampo("password","senhaFraca")),u.Fb(4),u.rc("status",t.verificaValidacaoCampo("password_confirm")?"danger":"basic"),u.Fb(1),u.rc("ngIf",t.verificaValidacaoCampo("password_confirm","required")),u.Fb(1),u.rc("ngIf",t.validateEqualPassword())}}const X=[{path:"",component:(()=>{class t{constructor(t,e,r,a,o,s){this.router=t,this.fb=e,this.usuarioService=r,this.equipeService=a,this.http=o,this.toastrService=s,this.dados=this.fb.group({ativo:null,comunidade:new i.d({value:null,disabled:!0}),email:new i.d({value:null,disabled:!0}),equipe:new i.d({value:null,disabled:!0}),hierarquia:new i.d({value:null,disabled:!0}),name:[null,i.x.required],bd:[null,this.validarDataAniversario],coordenaEquipe:new i.d({value:null,disabled:!0}),mudarSenha:null,password:null,password_confirm:null}),this.comunidades=Object.keys(n.a).map(t=>({k:t,v:n.a[t]})),this.hierarquia=Object.keys(n.b).map(t=>({k:t,v:n.b[t]})),this.mudarSenha=!1}ngOnInit(){this.usuarioService.usuarioLogado().subscribe(t=>{this.equipeService.select().subscribe(e=>{this.equipes=e,this.dados.patchValue(Object.assign(Object.assign({},t),{bd:t.bd&&new Date(t.bd)}))})}),this.usuarioService.image.subscribe(t=>{this.avatar=t}),this.dados.controls.mudarSenha.valueChanges.subscribe(t=>{t?(this.dados.controls.password.setValidators([i.x.required,this.validatePassword]),this.dados.controls.password_confirm.setValidators([i.x.required])):(this.dados.controls.password_confirm.clearValidators(),this.dados.controls.password.clearValidators()),this.mudarSenha=t})}validatePassword(t){return t.value&&t.value.match(/((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%]).{6,20})/)?null:{senhaFraca:{valid:!1}}}validarDataAniversario(t){return t.value&&Object(c.a)(new Date,10)<=t.value?{dataInvalida:!0}:null}salvar(){this.dados.valid&&this.usuarioService.atualizarUsuarioLogado(this.dados.value).subscribe(t=>{t&&this.router.navigate(["/pages/dashboard"])})}uploadFiles(t){t.length>0&&(this.image=t[0],this.enviarDoc())}enviarDoc(){const t=new FormData;t.append("file",this.image,this.image.name),this.http.post(`${d.c}/user/atualizarAvatar`,t).subscribe(t=>{this.toastrService.success("Doc enviado com sucesso"),this.usuarioService.getAvatarFromService()},t=>this.toastrService.danger("erro ao enviar o arquivo, favor tentar novamente"))}validateEqualPassword(){return this.dados.value.mudarSenha&&this.dados.value.password!==this.dados.value.password_confirm}verificaValidacaoCampo(t,e){return this.dados.controls[t].dirty&&(e?this.dados.controls[t].errors&&this.dados.controls[t].errors[e]:this.dados.controls[t].invalid)}}return t.\u0275fac=function(e){return new(e||t)(u.Sb(o.c),u.Sb(i.c),u.Sb(s.a),u.Sb(l.a),u.Sb(b.b),u.Sb(p.yb))},t.\u0275cmp=u.Mb({type:t,selectors:[["ngx-perfil"]],decls:60,vars:13,consts:[[3,"formGroup"],["nbButton","","size","small","ghost","","routerLink","/pages/admin/usuarios"],["icon","arrow-left"],[1,"form-group"],["dnd","",1,"container",3,"fileDropped"],["type","file","id","fileDropRef","multiple","",3,"change"],["fileDropRef",""],[3,"src"],["icon","upload-outline",2,"font-size","15px"],[1,"row","form-group"],[1,"form-group","col-md-4"],["for","Nome","required","",1,"label"],["type","text","nbInput","","placeholder","Nome","fullWidth","","id","nome","formControlName","name",3,"status"],["class","caption status-danger",4,"ngIf"],["for","Email","required","",1,"label"],["type","email","nbInput","","placeholder","Email","fullWidth","","id","Email","formControlName","email",3,"status"],[1,"row"],[1,"label"],["fullWidth","","nbInput","","formControlName","bd",3,"status","nbDatepicker"],["dp",""],["for","equipe","required","",1,"label"],["placeholder","Equipe","fullWidth","","formControlName","equipe"],[3,"value",4,"ngFor","ngForOf"],["labelPosition","start","formControlName","coordenaEquipe","disabled","true"],[1,"form-group","row"],["for","hierarquia","required","",1,"label"],["placeholder","Posi\xe7\xe3o","fullWidth","","formControlName","hierarquia"],["for","comunidade","required","",1,"label"],["placeholder","Comunidade","fullWidth","","formControlName","comunidade"],["formControlName","mudarSenha"],[4,"ngIf"],["nbButton","",3,"click"],[1,"caption","status-danger"],[3,"value"],["required","",1,"label"],["type","password","nbInput","","placeholder","Senha","fullWidth","","id","password","formControlName","password",3,"status"],["type","password","nbInput","","placeholder","Confirmar senha","fullWidth","","formControlName","password_confirm",3,"status"]],template:function(t,e){if(1&t&&(u.Yb(0,"form",0),u.Yb(1,"nb-card"),u.Yb(2,"nb-card-header"),u.Yb(3,"button",1),u.Tb(4,"nb-icon",2),u.Xb(),u.Jc(5," Editar usu\xe1rio "),u.Xb(),u.Yb(6,"nb-card-body"),u.Yb(7,"div",3),u.Yb(8,"div",4),u.gc("fileDropped",(function(t){return e.uploadFiles(t)})),u.Yb(9,"input",5,6),u.gc("change",(function(t){return e.uploadFiles(t.target.files)})),u.Xb(),u.Tb(11,"img",7),u.Yb(12,"h3"),u.Tb(13,"nb-icon",8),u.Xb(),u.Xb(),u.Xb(),u.Yb(14,"div",9),u.Yb(15,"div",10),u.Yb(16,"label",11),u.Jc(17,"Nome "),u.Xb(),u.Tb(18,"input",12),u.Hc(19,m,2,0,"p",13),u.Xb(),u.Yb(20,"div",10),u.Yb(21,"label",14),u.Jc(22,"Email "),u.Xb(),u.Tb(23,"input",15),u.Hc(24,g,2,0,"p",13),u.Xb(),u.Xb(),u.Yb(25,"div",16),u.Yb(26,"div",10),u.Yb(27,"label",17),u.Jc(28,"Anivers\xe1rio:"),u.Xb(),u.Tb(29,"input",18),u.Tb(30,"nb-datepicker",null,19),u.Hc(32,h,2,0,"p",13),u.Xb(),u.Yb(33,"div",10),u.Yb(34,"label",20),u.Jc(35,"Equipe "),u.Xb(),u.Yb(36,"nb-select",21),u.Hc(37,v,2,2,"nb-option",22),u.Xb(),u.Xb(),u.Yb(38,"div",10),u.Yb(39,"nb-toggle",23),u.Jc(40,"Coordena Equipe?"),u.Xb(),u.Xb(),u.Xb(),u.Yb(41,"div",24),u.Yb(42,"div",10),u.Yb(43,"label",25),u.Jc(44,"Posi\xe7\xe3o "),u.Xb(),u.Yb(45,"nb-select",26),u.Hc(46,x,2,2,"nb-option",22),u.Xb(),u.Xb(),u.Yb(47,"div",10),u.Yb(48,"label",27),u.Jc(49,"Comunidade "),u.Xb(),u.Yb(50,"nb-select",28),u.Hc(51,O,2,2,"nb-option",22),u.Xb(),u.Xb(),u.Xb(),u.Yb(52,"div",24),u.Yb(53,"div",10),u.Yb(54,"nb-checkbox",29),u.Jc(55,"Mudar Senha"),u.Xb(),u.Xb(),u.Hc(56,Y,13,6,"ng-container",30),u.Xb(),u.Xb(),u.Yb(57,"nb-card-footer"),u.Yb(58,"button",31),u.gc("click",(function(){return e.salvar()})),u.Jc(59,"Salvar"),u.Xb(),u.Xb(),u.Xb(),u.Xb()),2&t){const t=u.yc(31);u.rc("formGroup",e.dados),u.Fb(11),u.rc("src",e.avatar,u.Dc),u.Fb(7),u.rc("status",e.verificaValidacaoCampo("name")?"danger":"basic"),u.Fb(1),u.rc("ngIf",e.verificaValidacaoCampo("name","required")),u.Fb(4),u.rc("status",e.verificaValidacaoCampo("email")?"danger":""),u.Fb(1),u.rc("ngIf",e.verificaValidacaoCampo("email","required")),u.Fb(5),u.rc("status",e.verificaValidacaoCampo("bd")?"danger":"basic")("nbDatepicker",t),u.Fb(3),u.rc("ngIf",e.verificaValidacaoCampo("bd","dataInvalida")),u.Fb(5),u.rc("ngForOf",e.equipes),u.Fb(9),u.rc("ngForOf",e.hierarquia),u.Fb(5),u.rc("ngForOf",e.comunidades),u.Fb(5),u.rc("ngIf",e.mudarSenha)}},directives:[i.z,i.o,i.g,p.x,p.A,p.t,o.d,p.P,p.w,f.a,p.S,i.b,i.n,i.f,a.n,p.J,p.I,p.mb,a.m,p.zb,p.D,p.y,p.jb],styles:[".container[_ngcontent-%COMP%]{width:180px;height:180px;padding:2rem;border:1px dashed #979797;border-radius:50%;position:relative;margin:0 auto;display:-webkit-box;display:flex;text-align:center;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;overflow:hidden}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:180px;height:180px;margin-left:15px}.container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;width:183px;height:44px;border-radius:21.5px;background-color:#db202f;padding:8px 16px}.container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#38424c}.fileover[_ngcontent-%COMP%]{-webkit-animation:shake 1s;animation:shake 1s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.files-list[_ngcontent-%COMP%]{margin-top:1.5rem}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]{display:-webkit-box;padding:.5rem;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;border:1px dashed #979797;margin-bottom:1rem;display:flex;-webkit-box-flex:1;flex-grow:1}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   img.delete[_ngcontent-%COMP%]{margin-left:.5rem;cursor:pointer;align-self:flex-end}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#353f4a;margin:0}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#a4a4a4;margin:0 0 .25rem}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:100%}@-webkit-keyframes shake{0%{-webkit-transform:translate(1px,1px) rotate(0deg);transform:translate(1px,1px) rotate(0deg)}10%{-webkit-transform:translate(-1px,-2px) rotate(-1deg);transform:translate(-1px,-2px) rotate(-1deg)}20%{-webkit-transform:translate(-3px) rotate(1deg);transform:translate(-3px) rotate(1deg)}30%{-webkit-transform:translate(3px,2px) rotate(0deg);transform:translate(3px,2px) rotate(0deg)}40%{-webkit-transform:translate(1px,-1px) rotate(1deg);transform:translate(1px,-1px) rotate(1deg)}50%{-webkit-transform:translate(-1px,2px) rotate(-1deg);transform:translate(-1px,2px) rotate(-1deg)}60%{-webkit-transform:translate(-3px,1px) rotate(0deg);transform:translate(-3px,1px) rotate(0deg)}70%{-webkit-transform:translate(3px,1px) rotate(-1deg);transform:translate(3px,1px) rotate(-1deg)}80%{-webkit-transform:translate(-1px,-1px) rotate(1deg);transform:translate(-1px,-1px) rotate(1deg)}90%{-webkit-transform:translate(1px,2px) rotate(0deg);transform:translate(1px,2px) rotate(0deg)}to{-webkit-transform:translate(1px,-2px) rotate(-1deg);transform:translate(1px,-2px) rotate(-1deg)}}@keyframes shake{0%{-webkit-transform:translate(1px,1px) rotate(0deg);transform:translate(1px,1px) rotate(0deg)}10%{-webkit-transform:translate(-1px,-2px) rotate(-1deg);transform:translate(-1px,-2px) rotate(-1deg)}20%{-webkit-transform:translate(-3px) rotate(1deg);transform:translate(-3px) rotate(1deg)}30%{-webkit-transform:translate(3px,2px) rotate(0deg);transform:translate(3px,2px) rotate(0deg)}40%{-webkit-transform:translate(1px,-1px) rotate(1deg);transform:translate(1px,-1px) rotate(1deg)}50%{-webkit-transform:translate(-1px,2px) rotate(-1deg);transform:translate(-1px,2px) rotate(-1deg)}60%{-webkit-transform:translate(-3px,1px) rotate(0deg);transform:translate(-3px,1px) rotate(0deg)}70%{-webkit-transform:translate(3px,1px) rotate(-1deg);transform:translate(3px,1px) rotate(-1deg)}80%{-webkit-transform:translate(-1px,-1px) rotate(1deg);transform:translate(-1px,-1px) rotate(1deg)}90%{-webkit-transform:translate(1px,2px) rotate(0deg);transform:translate(1px,2px) rotate(0deg)}to{-webkit-transform:translate(1px,-2px) rotate(-1deg);transform:translate(1px,-2px) rotate(-1deg)}}"]}),t})()}];let P=(()=>{class t{}return t.\u0275mod=u.Qb({type:t}),t.\u0275inj=u.Pb({factory:function(e){return new(e||t)},imports:[[o.g.forChild(X)],o.g]}),t})();var M=r("oG2T");let E=(()=>{class t{}return t.\u0275mod=u.Qb({type:t}),t.\u0275inj=u.Pb({factory:function(e){return new(e||t)},imports:[[a.c,P,i.u,i.h,p.B,p.R,p.T,p.nb,p.Ab,p.u,p.K,M.a,p.E]]}),t})()}}]);